[gd_scene load_steps=4 format=2]

[ext_resource path="res://Assets/Placeholders/icon.png" type="Texture" id=1]

[sub_resource type="GDScript" id=1]
script/source = "extends Position2D

func blurb(text:String):
	InteractionBlurb.display(text, self)"

[sub_resource type="GDScript" id=2]
script/source = "extends Control

class_name ClickArea

signal on_activate
signal on_apply_item

export var ActivatorName : String = \"Unnamed\"

func _gui_input(event):
	if ModeController.mode != ModeController.EXPLORE:
		mouse_default_cursor_shape = Control.CURSOR_ARROW
		return
	else:
		mouse_default_cursor_shape = Control.CURSOR_POINTING_HAND
	if not event is InputEventMouseButton:
		return
	if event.button_index != BUTTON_LEFT or not event.pressed:
		return
	
	print(\"Clicked %s!\" % ActivatorName)
	
	if ModeController.get_is_player_holding_item():
		emit_signal(\"on_apply_item\", ModeController.holding_item, ModeController.holding_callback)
		ModeController.apply_item(get_parent())
	else:
		emit_signal(\"on_activate\")
		var activatable = get_parent().get_node(\"Activator\")
		if activatable != null and activatable.has_method(\"activate\"):
			activatable.activate()
		if activatable != null and activatable.has_method(\"on_activate\"):
			activatable.on_activate()

func blurb(text:String):
	if $\"../BlurbPoint\" == null:
		printerr(\"No blurb point set!\")
	else:
		$\"../BlurbPoint\".blurb(text)
        
func _ready():
    mouse_default_cursor_shape = Control.CURSOR_POINTING_HAND"

[node name="BaseObject" type="Node2D"]

[node name="Sprite" type="Sprite" parent="."]
position = Vector2( -0.88578, -15.4263 )
scale = Vector2( 0.458824, 0.473206 )
texture = ExtResource( 1 )

[node name="BlurbPoint" type="Position2D" parent="."]
script = SubResource( 1 )

[node name="ClickArea" type="Control" parent="."]
margin_left = -15.0
margin_top = -30.0
margin_right = 14.0
mouse_default_cursor_shape = 2
script = SubResource( 2 )

[node name="Activator" type="Node" parent="."]
[connection signal="gui_input" from="ClickArea" to="ClickArea" method="_on_ClickArea_gui_input"]
