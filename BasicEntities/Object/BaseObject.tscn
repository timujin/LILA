[gd_scene load_steps=5 format=2]

[ext_resource path="res://Assets/Placeholders/icon.png" type="Texture" id=1]
[ext_resource path="res://BasicEntities/Object/BaseActivator.gd" type="Script" id=2]
[ext_resource path="res://BasicEntities/Object/BasePickler.gd" type="Script" id=3]

[sub_resource type="GDScript" id=1]
script/source = "extends Control

class_name BaseClickArea

onready var interaction_point = get_parent().get_node(\"InteractionPoint\")
onready var activator = get_parent().get_node(\"Activator\")
#onready var floatie = get_node(\"/root/Floatie\")

export var ActivatorName : String = \"Unnamed\"

func _on_ClickArea_gui_input(event):
	if ModeController.mode != ModeController.EXPLORE:
		mouse_default_cursor_shape = Control.CURSOR_ARROW
		return
	else:
		mouse_default_cursor_shape = Control.CURSOR_POINTING_HAND
	if not event is InputEventMouseButton:
		return
	if event.button_index != BUTTON_LEFT or not event.pressed:
		return
		
	if ModeController.get_is_player_holding_item():
		ModeController.apply_item($\"../Activator\")
	else:
		trigger_activator()


func trigger_activator():
	if activator == null:
		printerr(\"No activator set for %s\" % ActivatorName)
		return
	activator.activate()"

[node name="BaseObject" type="Node2D"]

[node name="Sprite" type="Sprite" parent="."]
position = Vector2( -0.88578, -15.4263 )
scale = Vector2( 0.458824, 0.473206 )
texture = ExtResource( 1 )

[node name="BlurbPoint" type="Position2D" parent="."]

[node name="ClickArea" type="Control" parent="."]
margin_left = -15.0
margin_top = -30.0
margin_right = 14.0
mouse_default_cursor_shape = 2
script = SubResource( 1 )

[node name="Activator" type="Node" parent="."]
script = ExtResource( 2 )

[node name="Pickler" type="Node" parent="." groups=[
"picklers",
]]
script = ExtResource( 3 )
[connection signal="gui_input" from="ClickArea" to="ClickArea" method="_on_ClickArea_gui_input"]
