[gd_scene load_steps=11 format=2]

[ext_resource path="res://Systems/Rooms/BaseRoom.tscn" type="PackedScene" id=1]
[ext_resource path="res://Content/Rooms/FFFFFTestinghall/Blueroom/Blueroom.png" type="Texture" id=2]
[ext_resource path="res://Systems/Interactables/BaseInteractable.tscn" type="PackedScene" id=3]
[ext_resource path="res://Content/Rooms/FFFFFTestinghall/Blueroom/Lamp.png" type="Texture" id=4]
[ext_resource path="res://Content/Rooms/FFFFFTestinghall/Blueroom/Halo.png" type="Texture" id=5]
[ext_resource path="res://Systems/Rooms/BasePickler.gd" type="Script" id=6]

[sub_resource type="GDScript" id=1]
script/source = "extends Node

func activate():
	RoomSwitcher.switch_to(\"FFFFFRedroom\")"

[sub_resource type="GDScript" id=2]
script/source = "extends Node

func activate():
	RoomSwitcher.switch_to(\"FFFFFGreenroom\")
"

[sub_resource type="GDScript" id=3]
script/source = "extends Node

func activate():
	$\"../Halo\".switch()
"

[sub_resource type="GDScript" id=4]
script/source = "extends Sprite


func switch():
	visible = not visible
	#$\"../OnOffPickler\".update(\"is_on\", visible)


#func _on_OnOffPickler_unpickled(data):
#	visible = data[\"is_on\"]

func _ready():
	print (\"!\"+str(self.is_in_group(\"serializable_room\")))


func serialize():
	return {
		\"on\": visible
	}
	
func deserialize(data):
	assert( data.has(\"on\") )
	visible = data[\"on\"]
"

[node name="Room" instance=ExtResource( 1 )]
roomID = "FFFFFBlueroom"

[node name="Lamp" type="Sprite" parent="Background" index="0"]
position = Vector2( 897.96, 435.697 )
scale = Vector2( 2.11991, 1.80825 )
texture = ExtResource( 2 )

[node name="CameraLimitLeft" parent="Geometry" index="0"]
position = Vector2( -141.468, 456.359 )

[node name="CameraLimitTop" parent="Geometry" index="1"]
position = Vector2( 938.961, -25.7302 )

[node name="CameraLimitBottom" parent="Geometry" index="2"]
position = Vector2( 939.081, 895.861 )

[node name="CameraLimitRight" parent="Geometry" index="3"]
position = Vector2( 4066.73, 485.039 )

[node name="Redroom" parent="." index="3" instance=ExtResource( 3 )]
position = Vector2( 247.729, 405.675 )
scale = Vector2( 2.11991, 1.80825 )

[node name="BlurbPoint" parent="Redroom" index="0"]
position = Vector2( 297.802, -34.101 )

[node name="Activator" parent="Redroom" index="1"]
script = SubResource( 1 )

[node name="BaseInteractable" parent="Redroom" index="3" instance=ExtResource( 3 )]
position = Vector2( 264.795, 124.572 )

[node name="Greenroom" parent="." index="4" instance=ExtResource( 3 )]
position = Vector2( 247.729, 405.675 )
scale = Vector2( 2.11991, 1.80825 )

[node name="BlurbPoint" parent="Greenroom" index="0"]
position = Vector2( 297.802, -34.101 )

[node name="Activator" parent="Greenroom" index="1"]
script = SubResource( 2 )

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Greenroom/Clickable" index="0"]
polygon = PoolVector2Array( 481.668, -200.703, 462.76, 30.2094, 744.026, 110.567, 794.449, -197.009 )

[node name="Lamp" parent="." index="5" instance=ExtResource( 3 )]
position = Vector2( 720.573, 538.118 )

[node name="BlurbPoint" parent="Lamp" index="0"]
position = Vector2( 176.995, -410.112 )

[node name="Activator" parent="Lamp" index="1"]
script = SubResource( 3 )

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Lamp/Clickable" index="0"]
polygon = PoolVector2Array( 40.5109, -360.079, -19.616, -204.752, 32.1599, -17.6899, 160.765, -7.66876, 332.795, -154.646, 327.784, -371.771, 95.6272, -483.674 )

[node name="Lamp" type="Sprite" parent="Lamp" index="3"]
position = Vector2( 127.35, -200.739 )
texture = ExtResource( 4 )

[node name="Halo" type="Sprite" parent="Lamp" index="4"]
position = Vector2( 135.864, -272.576 )
scale = Vector2( 0.883643, 0.582174 )
texture = ExtResource( 5 )
script = SubResource( 4 )

[node name="OnOffPickler" type="Node" parent="Lamp" index="5"]
script = ExtResource( 6 )
data = {
"is_on": true
}

[node name="Lamp2" parent="." index="6" instance=ExtResource( 3 )]
position = Vector2( 349.422, 722.668 )

[node name="BlurbPoint" parent="Lamp2" index="0"]
position = Vector2( 176.995, -410.112 )

[node name="Activator" parent="Lamp2" index="1"]
script = SubResource( 3 )

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Lamp2/Clickable" index="0"]
polygon = PoolVector2Array( 40.5109, -360.079, -19.616, -204.752, 32.1599, -17.6899, 160.765, -7.66876, 332.795, -154.646, 327.784, -371.771, 95.6272, -483.674 )

[node name="Lamp" type="Sprite" parent="Lamp2" index="3"]
position = Vector2( 127.35, -200.739 )
texture = ExtResource( 4 )

[node name="Halo" type="Sprite" parent="Lamp2" index="4" groups=[
"serializable_room",
]]
position = Vector2( 135.864, -272.576 )
scale = Vector2( 0.883643, 0.582174 )
texture = ExtResource( 5 )
script = SubResource( 4 )

[node name="FirstPersonCamera" parent="." index="7"]
position = Vector2( 781.321, 449.127 )
[connection signal="unpickled" from="Lamp/OnOffPickler" to="Lamp/Halo" method="_on_OnOffPickler_unpickled"]

[editable path="Redroom"]

[editable path="Greenroom"]

[editable path="Lamp"]

[editable path="Lamp2"]
