[gd_scene load_steps=9 format=2]

[ext_resource path="res://Systems/Rooms/BaseRoom.tscn" type="PackedScene" id=1]
[ext_resource path="res://Systems/GlobalRegister/Assets/pexels-photo-1587548.jpeg" type="Texture" id=2]
[ext_resource path="res://Systems/GlobalRegister/Assets/lit_firepit.png" type="Texture" id=3]
[ext_resource path="res://Systems/GlobalRegister/Assets/wood_firepit.png" type="Texture" id=4]
[ext_resource path="res://Systems/GlobalRegister/Assets/empty_firepit.png" type="Texture" id=5]
[ext_resource path="res://Systems/Rooms/BasePickler.gd" type="Script" id=6]

[sub_resource type="GDScript" id=1]
script/source = "extends Node
\"\"\"
The Spirit transitions here after Falling through the Darkness

Here, Eris and Aneris are glad that they have finally summoned the Spirit.
They want to celebrate it with a little picnic. After that, they intend to create the Universe.
The Spirit gets to wander around and learn some things or get some items, just
immersing himself into his first encounter with the absurdity of LILA.

However, once they relax and make some tea, the Spirit starts dissociating. 
He is being summoned again, outside of the domain of the sister goddesses. 

After this, the Spirit transitions to Cosmorauts

The game is saved when entering the location. Dying to the Suits gets you Game Over and 
brings you back to the beginning. (this part NIY)
\"\"\"
"

[sub_resource type="GDScript" id=2]
script/source = "tool
extends Node

#enum STATE {EMPTY, FULL, LIT}

export(String, \"empty\", \"full\", \"lit\") var state setget set_state

onready var empty_firepit = $empty_firepit
onready var lit_firepit = $lit_firepit
onready var wood_firepit = $wood_firepit

#func _ready():
#	set_state(self.state)

func _process(delta):
	$empty_firepit.rotation_degrees += 0 * delta
	
func set_state(new_state):
	state = new_state
	empty_firepit.visible = false
	lit_firepit.visible = false
	wood_firepit.visible = false
	match new_state:
		\"empty\":
			empty_firepit.visible = true
		\"full\":
			wood_firepit.visible = true
		\"lit\":
			lit_firepit.visible = true


func _on_Pickler_unpickled(data):
	call_deferred(\"set_state\", data[\"state\"])
"

[node name="Room" instance=ExtResource( 1 )]
roomName = "Divine picnic"
roomID = "00000DivinePicnicCamp"

[node name="Description" parent="." index="0"]
script = SubResource( 1 )

[node name="pexels-photo-1587548" type="Sprite" parent="Background" index="0"]
position = Vector2( 22.1082, 22.3551 )
scale = Vector2( 0.783857, 0.705467 )
texture = ExtResource( 2 )
__meta__ = {
"_edit_lock_": true
}

[node name="Objects" type="Node" parent="." index="5"]

[node name="Firepit" type="Node" parent="Objects" index="0"]

[node name="StateSwitcher" type="Node" parent="Objects/Firepit" index="0"]
script = SubResource( 2 )
state = "empty"

[node name="empty_firepit" type="Sprite" parent="Objects/Firepit/StateSwitcher" index="0"]
position = Vector2( 27.6863, 28.3787 )
rotation = 229.867
texture = ExtResource( 5 )

[node name="lit_firepit" type="Sprite" parent="Objects/Firepit/StateSwitcher" index="1"]
visible = false
position = Vector2( 27.6863, 28.3787 )
texture = ExtResource( 3 )

[node name="wood_firepit" type="Sprite" parent="Objects/Firepit/StateSwitcher" index="2"]
visible = false
position = Vector2( 27.6863, 28.3787 )
texture = ExtResource( 4 )

[node name="Pickler" type="Node" parent="Objects/Firepit" index="1"]
script = ExtResource( 6 )
data = {
"state": "empty"
}
[connection signal="unpickled" from="Objects/Firepit/Pickler" to="Objects/Firepit/StateSwitcher" method="_on_Pickler_unpickled"]
