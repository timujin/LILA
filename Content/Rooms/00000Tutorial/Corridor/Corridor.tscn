[gd_scene load_steps=11 format=2]

[ext_resource path="res://Content/Rooms/00000Tutorial/Corridor/9.jpg" type="Texture" id=1]
[ext_resource path="res://Systems/Cutscenes/VNgine(obsolete)/Base.tscn" type="PackedScene" id=2]
[ext_resource path="res://Systems/Interactables/BaseInteractable.tscn" type="PackedScene" id=3]
[ext_resource path="res://Systems/Rooms/BaseRoom.tscn" type="PackedScene" id=4]


[sub_resource type="Gradient" id=1]
offsets = PoolRealArray( 0.996409, 1 )

[sub_resource type="GradientTexture" id=2]
gradient = SubResource( 1 )

[sub_resource type="GDScript" id=3]
script/source = "extends Node

onready var VN = $VNgine

signal show_door
signal proceed
signal finished

# Called when the node enters the scene tree for the first time.
func _ready():
	yield($\"/root/Room\", \"room_loaded\")
	VN.show()
	VN.poses.reset()
	VN.speaker.reset()
	


	
	yield(think(\"It's dark.\"), \"completed\")
	yield(think(\"I've been walking down this path forever.\"), \"completed\")
	yield(think(\"I remember nothing other than this corridor.\"), \"completed\")
	yield(think(\"The walk is stretching out infinitely into the past, like a temporal vanishing point.\"), \"completed\")
	yield(think(\"I wonder if it will stretch forever into the future, too.\"), \"completed\")
	yield(think(\"Walking, walking, and walking.\"), \"completed\")
	yield(think(\"Forever.\"), \"completed\")
	yield(think(\"I don't even know who I am.\"), \"completed\")
	yield(think(\"I don't have anything to latch onto, no reference point to ground myself.\"), \"completed\")
	yield(think(\"The Universe is nothing but this corridor.\"), \"completed\")
	yield(think(\"Do I even exist?\"), \"completed\")
	yield(think(\"I think, therefore, I am.\"), \"completed\")
	yield(think(\"I think.\"), \"completed\")
	emit_signal(\"show_door\")
	yield(self, \"proceed\")
	yield(think(\"A door?\"), \"completed\")
	yield(think(\"That's new.\"), \"completed\")
	yield(think(\"Might as well go through.\"), \"completed\")
	emit_signal(\"finished\")
	queue_free()
	
func proceed():
	emit_signal(\"proceed\")
	
func say(author, text):
	VN.speaker.say(author, text)
	yield(VN.speaker, \"dismissed\")
	
func think(text):
	VN.speaker.think(text)
	yield(VN.speaker, \"dismissed\")"

[sub_resource type="GDScript" id=4]
script/source = "extends Node2D



func _on_StartingCutscene_show_door():
	$\"Sprite/AnimationPlayer\".play(\"New Anim\")
	yield($\"Sprite/AnimationPlayer\", \"animation_finished\")
	$\"../StartingCutscene\".proceed()
"

[sub_resource type="GDScript" id=5]
script/source = "extends Node

func activate():
	RoomSwitcher.switch_to(\"GoddessRoom\")"

[sub_resource type="Animation" id=6]
length = 1.5
tracks/0/type = "value"
tracks/0/path = NodePath(".:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1.5 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Color( 1, 1, 1, 0 ), Color( 1, 1, 1, 1 ) ]
}
tracks/1/type = "method"
tracks/1/path = NodePath("../../StartingCutscene")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray(  ),
"transitions": PoolRealArray(  ),
"values": [  ]
}

[node name="Room" instance=ExtResource( 4 )]
roomName = "Corridor"
roomID = "00000Corridor"

[node name="TextureRect" type="TextureRect" parent="Background" index="0"]
margin_left = -466.614
margin_top = -219.048
margin_right = 2186.39
margin_bottom = 1216.95
texture = SubResource( 2 )
expand = true
__meta__ = {
"_edit_lock_": true
}

[node name="CameraLimitLeft" parent="Geometry" index="0"]
position = Vector2( -12.0067, 542.16 )

[node name="CameraLimitTop" parent="Geometry" index="1"]
position = Vector2( 810.28, 1.38037 )

[node name="CameraLimitBottom" parent="Geometry" index="2"]
position = Vector2( 804.529, 915.987 )

[node name="CameraLimitRight" parent="Geometry" index="3"]
position = Vector2( 1616.61, 481.953 )

[node name="StartingCutscene" type="Node" parent="." index="3"]
script = SubResource( 3 )

[node name="VNgine" parent="StartingCutscene" index="0" instance=ExtResource( 2 )]

[node name="Modal" parent="StartingCutscene/VNgine" index="0"]
visible = false

[node name="Door" parent="." index="4" instance=ExtResource( 3 )]
script = SubResource( 4 )

[node name="BlurbPoint" parent="Door" index="0"]
position = Vector2( 803.63, 333.816 )

[node name="ClickArea" parent="Door" index="1"]
margin_left = 760.0
margin_top = 365.0
margin_right = 896.0
margin_bottom = 613.0
ActivatorName = "Glowing door"

[node name="Activator" parent="Door" index="2"]
script = SubResource( 5 )

[node name="Sprite" type="Sprite" parent="Door" index="3"]
modulate = Color( 1, 1, 1, 0 )
position = Vector2( 829.484, 470.718 )
scale = Vector2( 2.10646, 2.13178 )
texture = ExtResource( 1 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="Door/Sprite" index="0"]
"anims/New Anim" = SubResource( 6 )
[connection signal="show_door" from="StartingCutscene" to="Door" method="_on_StartingCutscene_show_door"]

[editable path="StartingCutscene/VNgine"]

[editable path="Door"]
