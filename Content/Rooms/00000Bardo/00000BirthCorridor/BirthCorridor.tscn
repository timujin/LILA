[gd_scene load_steps=13 format=2]

[ext_resource path="res://BasicEntities/Room/BaseRoom.tscn" type="PackedScene" id=1]
[ext_resource path="res://BasicEntities/Object/BaseObject.tscn" type="PackedScene" id=2]
[ext_resource path="res://Content/Rooms/00000Bardo/00000BirthCorridor/9.jpg" type="Texture" id=3]

[sub_resource type="GDScript" id=1]
script/source = "extends Node

func _on_Room_room_loaded():
	#$\"/root/ModeController\".start_vn()
	start_cutscene()
	
	
var VN = null
func start_cutscene():
	VN = preload(\"res://Content/Rooms/00000Bardo/00000BirthCorridor/StartingDialogue.tscn\").instance()
	VN.connect(\"show_door\", self, \"show_door\")
	VN.connect(\"finished\" , self, \"dialogue_finished\")
	add_child(VN)
	VN.run()
	
func show_door():
	$\"../GlowingDoor/AnimationPlayer\".play(\"fadein\")
	yield($\"../GlowingDoor/AnimationPlayer\", \"animation_finished\")
	VN.proceed()
	
func dialogue_finished():
	VN.queue_free()
"

[sub_resource type="Gradient" id=2]
offsets = PoolRealArray( 0.992453, 1 )

[sub_resource type="GradientTexture" id=3]
gradient = SubResource( 2 )

[sub_resource type="GDScript" id=4]
script/source = "extends Activator

func on_activate():
	$\"/root/Room/WhiteLight/AnimationPlayer\".play(\"fadein\")
	yield($\"/root/Room/WhiteLight/AnimationPlayer\", \"animation_finished\")
	
	RoomSwitcher.\\
	switch_to(\"00000HappyBirthday\")"

[sub_resource type="GDScript" id=5]
script/source = "extends BasePickler

func deserialize(params:Dictionary)->void:
	pass

func serialize()->Dictionary:
	return {}

func default_parameters()->Dictionary:
	return {}"

[sub_resource type="Animation" id=6]
resource_name = "fadein"
length = 2.0
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1.9 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Color( 1, 1, 1, 0 ), Color( 1, 1, 1, 1 ) ]
}

[sub_resource type="Gradient" id=7]
offsets = PoolRealArray( 0, 0.00188679 )

[sub_resource type="GradientTexture" id=8]
gradient = SubResource( 7 )

[sub_resource type="Animation" id=9]
resource_name = "fadein"
length = 1.5
tracks/0/type = "value"
tracks/0/path = NodePath(".:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1.4 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Color( 1, 1, 1, 0 ), Color( 1, 1, 1, 1 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ true ]
}

[node name="Room" index="0" instance=ExtResource( 1 )]
roomName = "Corridor?"
roomID = "00000BirthCorridor"

[node name="Director" type="Node" parent="." index="0"]
script = SubResource( 1 )

[node name="Sprite" type="Sprite" parent="Background" index="0"]
position = Vector2( 818.689, 445.332 )
scale = Vector2( 0.832077, 939.599 )
texture = SubResource( 3 )

[node name="Geometry" parent="." index="2"]
editor/display_folded = true

[node name="CameraLimitLeft" parent="Geometry" index="0"]
position = Vector2( 1.17859, 424.706 )

[node name="CameraLimitTop" parent="Geometry" index="1"]
position = Vector2( 778.989, 9.60132 )

[node name="CameraLimitBottom" parent="Geometry" index="2"]
position = Vector2( 833.373, 901.144 )

[node name="CameraLimitRight" parent="Geometry" index="3"]
position = Vector2( 1597.72, 462.288 )

[node name="FirstPersonCamera" parent="." index="3"]
position = Vector2( 799.604, 452.748 )

[node name="GlowingDoor" parent="." index="4" instance=ExtResource( 2 )]
position = Vector2( 703.239, 305.354 )

[node name="Sprite" parent="GlowingDoor" index="0"]
modulate = Color( 1, 1, 1, 0 )
position = Vector2( 97.8641, 59.5728 )
scale = Vector2( 2.73328, 2.81896 )
texture = ExtResource( 3 )

[node name="BlurbPoint" parent="GlowingDoor" index="1"]
position = Vector2( -348.697, -58.4409 )

[node name="ClickArea" parent="GlowingDoor" index="2"]
margin_left = 6.0
margin_top = -71.0
margin_right = 182.0
margin_bottom = 240.0
ActivatorName = "A door?"

[node name="Activator" parent="GlowingDoor" index="3"]
script = SubResource( 4 )

[node name="Pickler" parent="GlowingDoor" index="4"]
script = SubResource( 5 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="GlowingDoor" index="5"]
anims/fadein = SubResource( 6 )

[node name="WhiteLight" type="Sprite" parent="." index="5"]
visible = false
position = Vector2( 839.98, 442.207 )
scale = Vector2( 0.853717, 947.598 )
texture = SubResource( 8 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="WhiteLight" index="0"]
anims/fadein = SubResource( 9 )
[connection signal="room_loaded" from="." to="Director" method="_on_Room_room_loaded"]

[editable path="GlowingDoor"]
