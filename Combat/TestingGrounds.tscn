[gd_scene load_steps=4 format=2]

[ext_resource path="res://Combat/BaseCombat.tscn" type="PackedScene" id=1]
[ext_resource path="res://Assets/Placeholders/icon.png" type="Texture" id=2]

[sub_resource type="GDScript" id=1]
script/source = "extends Node

onready var simple_bullet = preload(\"res://Combat/Bullets/SimpleCountdownBullet.tscn\")
onready var timing_bullet = preload(\"res://Combat/Bullets/SimpleTimingBullet.tscn\")

func _ready():
	#yield(get_tree().create_timer(0.3), \"timeout\")
	call_deferred(\"init_guard_combat\")


func init_guard_combat():
	$\"..\".add_card(null, \"Just click all the bullets\")
	
func random_position():
	var rng = RandomNumberGenerator.new()
	rng.randomize()
	var left = $\"../Bulletin/SpawnPoints/TopLeft\".position.x
	var right = $\"../Bulletin/SpawnPoints/BottomRight\".position.x
	var top = $\"../Bulletin/SpawnPoints/TopLeft\".position.y
	var bottom = $\"../Bulletin/SpawnPoints/BottomRight\".position.y
	var horiz = rng.randf_range(left, right)
	var verti = rng.randf_range(top, bottom)
	return Vector2(horiz, verti)

func showtime():
	for i in range(15):
		$\"..\".spawn_bullet(simple_bullet, 2.0, random_position())
		yield(get_tree().create_timer(0.5), \"timeout\")
	yield(get_tree().create_timer(2.0), \"timeout\")
	$\"..\".finish()"

[node name="Combat" instance=ExtResource( 1 )]

[node name="Director" type="Node" parent="." index="0"]
script = SubResource( 1 )

[node name="Enemies" parent="." index="1"]
editor/display_folded = true

[node name="Sprite" type="Sprite" parent="Enemies" index="0"]
position = Vector2( 733.445, 260.329 )
scale = Vector2( 4.88258, 3.34591 )
texture = ExtResource( 2 )

[node name="Bulletin" parent="." index="2"]
editor/display_folded = true

[node name="TacticalLayer" parent="UI" index="0"]
mouse_filter = 2

[node name="Hand" parent="UI/TacticalLayer" index="0"]
margin_top = 184.549
margin_bottom = 382.549
mouse_filter = 2
