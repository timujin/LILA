[gd_scene load_steps=8 format=2]

[ext_resource path="res://Objects/BaseRoom.tscn" type="PackedScene" id=1]
[ext_resource path="res://Assets/Sprites/Rooms/LongCorridor.png" type="Texture" id=2]
[ext_resource path="res://Objects/BaseObject.tscn" type="PackedScene" id=3]
[ext_resource path="res://Assets/Sprites/Interactables/Doors/Door.png" type="Texture" id=4]

[sub_resource type="GDScript" id=1]
script/source = "extends BaseRoom

func get_room_name()->String:
	return \"Corridor\"
	
func get_contains_player()->bool:
	return true
	
func get_default_parameters()->Dictionary:
	return {}
	
func get_player_spawn_point()->String:
	return \"DefaultSpiritSpawn\""

[sub_resource type="RectangleShape2D" id=2]
extents = Vector2( 143.571, 195.885 )

[sub_resource type="GDScript" id=3]
script/source = "extends Activator

#func on_activate():
#	get_node(\"/root/RoomSwitcher\").switch_room(load(\"res://Locations/FortressOfChains/SpiritSummoningRoom.tscn\"))

func on_activate():
	if $\"/root/Room\".get_self_parameter(\"door_locked\", true):
		print(\"Locked\")
		$\"/root/InteractionBlurb\".display(\"The door is locked\", $\"../BlurbPoint\")
	else:
		get_node(\"/root/RoomSwitcher\").switch_room(load(\"res://Locations/FortressOfChains/Corridor.tscn\"))"

[node name="Room" index="0" instance=ExtResource( 1 )]
script = SubResource( 1 )

[node name="LongCorridor" type="Sprite" parent="Background" index="0"]
position = Vector2( 1013.96, 428.79 )
scale = Vector2( 1.57479, 0.92011 )
texture = ExtResource( 2 )

[node name="RailroadLeft" parent="Geometry" index="0"]
position = Vector2( -1222.92, 717.382 )

[node name="RailroadRight" parent="Geometry" index="1"]
position = Vector2( 3227.86, 738.406 )

[node name="CameraLimitLeft" parent="Geometry" index="2"]
position = Vector2( -1332.35, 490.529 )

[node name="CameraLimitRight" parent="Geometry" index="3"]
position = Vector2( 3369.25, 513.304 )

[node name="DefaultSpiritSpawn" parent="Geometry" index="4"]
position = Vector2( 847.683, 787.051 )

[node name="BaseObject" parent="." index="2" instance=ExtResource( 3 )]
position = Vector2( 856.34, 649.688 )

[node name="Sprite" parent="BaseObject" index="0"]
position = Vector2( -0.885712, -191.341 )
scale = Vector2( 1.36538, 1.38696 )
texture = ExtResource( 4 )

[node name="BlurbPoint" parent="BaseObject" index="1"]
position = Vector2( 0, 2.78955 )

[node name="InteractionPoint" parent="BaseObject" index="2"]
position = Vector2( -5.87268, 127.846 )

[node name="ClickArea" parent="BaseObject" index="3"]
ActivatorName = "Door"

[node name="CollisionShape2D" parent="BaseObject/ClickArea" index="0"]
position = Vector2( -0.611725, -177.187 )
shape = SubResource( 2 )

[node name="Activator" parent="BaseObject" index="4"]
script = SubResource( 3 )

[editable path="BaseObject"]
