[gd_scene load_steps=10 format=2]

[ext_resource path="res://Objects/BaseRoom.tscn" type="PackedScene" id=1]
[ext_resource path="res://Assets/Sprites/Rooms/RoomBrickBlack.png" type="Texture" id=2]
[ext_resource path="res://Assets/Sprites/Decorations/Pentagram.png" type="Texture" id=3]
[ext_resource path="res://Objects/BaseObject.tscn" type="PackedScene" id=4]
[ext_resource path="res://Locations/00001PentagramRoom/Graphics/Door.png" type="Texture" id=5]

[sub_resource type="GDScript" id=2]
script/source = "extends BaseRoom

func get_room_name()->String:
	return \"Spirit Summoning Room\"
	
func get_contains_player()->bool:
	return true
	
func get_default_parameters()->Dictionary:
	return {}
	
func get_player_spawn_point()->String:
	return \"DefaultSpiritSpawn\""

[sub_resource type="GDScript" id=1]
script/source = "extends Node2D

onready var left_edge_of_room = $RailroadLeft
onready var left_edge_of_pent = $LeftEdgeOfPentagram

func unlock_pentagram():
	if left_edge_of_pent.position.x < left_edge_of_room.position.x:
		var tmp = left_edge_of_pent.position
		left_edge_of_pent.position = left_edge_of_room.position
		left_edge_of_room.position = tmp
		
		
func lock_pentagram():
	if left_edge_of_pent.position.x > left_edge_of_room.position.x:
		var tmp = left_edge_of_pent.position
		left_edge_of_pent.position = left_edge_of_room.position
		left_edge_of_room.position = tmp
"

[sub_resource type="RectangleShape2D" id=3]
extents = Vector2( 64.1544, 142.23 )

[sub_resource type="GDScript" id=4]
script/source = "extends Activator


func on_activate():
	get_node(\"/root/RoomSwitcher\").switch_room(load(\"res://Locations/FortressOfChains/Corridor.tscn\"))"

[node name="Room" index="0" instance=ExtResource( 1 )]
script = SubResource( 2 )

[node name="RoomBrickBlack" type="Sprite" parent="Background" index="0"]
position = Vector2( 797.207, 449.385 )
scale = Vector2( 1.47361, 1.50161 )
texture = ExtResource( 2 )

[node name="Pentagram" type="Sprite" parent="Background" index="1"]
position = Vector2( 1092.63, 764.3 )
scale = Vector2( 1.19912, 1.37323 )
texture = ExtResource( 3 )

[node name="Geometry" parent="." index="1"]
script = SubResource( 1 )

[node name="RailroadLeft" parent="Geometry" index="0"]
position = Vector2( 309.569, 775.382 )

[node name="RailroadRight" parent="Geometry" index="1"]
position = Vector2( 1246.02, 766.957 )

[node name="CameraLimitLeft" parent="Geometry" index="2"]
position = Vector2( 0.703323, 633.368 )

[node name="CameraLimitRight" parent="Geometry" index="3"]
position = Vector2( 1600.32, 650.713 )

[node name="DefaultSpiritSpawn" parent="Geometry" index="4"]
position = Vector2( 1104.23, 773.347 )

[node name="LeftEdgeOfPentagram" type="Position2D" parent="Geometry" index="5"]
position = Vector2( 291.525, 774.563 )

[node name="Door" parent="." index="2" instance=ExtResource( 4 )]
position = Vector2( 295.288, 730.645 )

[node name="Sprite" parent="Door" index="0"]
position = Vector2( -4.76386, -88.5566 )
scale = Vector2( 1.22454, 1.06758 )
texture = ExtResource( 5 )

[node name="InteractionPoint" parent="Door" index="1"]
position = Vector2( 76.4543, 44.3767 )

[node name="ClickArea" parent="Door" index="2"]
ActivatorName = "Door"

[node name="CollisionShape2D" parent="Door/ClickArea" index="0"]
position = Vector2( -8.36795, -76.2434 )
shape = SubResource( 3 )

[node name="Activator" parent="Door" index="3"]
script = SubResource( 4 )

[editable path="Door"]
