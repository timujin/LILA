[gd_scene load_steps=8 format=2]

[ext_resource path="res://Assets/Sprites/VNBodies/Lena.png" type="Texture" id=1]
[ext_resource path="res://Assets/Fonts/LilitaOne-Regular.ttf" type="DynamicFontData" id=2]

[sub_resource type="GDScript" id=1]
script/source = "extends CanvasLayer

onready var poses = $\"Modal/CharacterLayer/Poses\"
onready var speaker = $\"Modal/SubtitlesLayer/SpeakerBox\"

func show():
	$Modal.visible = true
	
func hide():
	$Modal.visible = false"

[sub_resource type="GDScript" id=2]
script/source = "extends Control

func reset():
	$Left.visible = false
	$Right.visible = false
	$Center.visible = false
	
func __set(slot, texture):
	if texture == null:
		slot.visible = false
	else:
		slot.visible = true
		slot.texture = texture
		
func set_left(texture):
	__set($Left, texture)
	
func set_center(texture):
	__set($Center, texture)
	
func set_right(texture):
	__set($Right, texture)
	
func _ready():
	reset()"

[sub_resource type="GDScript" id=3]
script/source = "extends Panel

signal dismissed

func hide():
	reset()
	visible = false
	
func reset():
	$\"Speaker\".text = \"\"
	$\"TextEdit\".text = \"\"
	
func say(speaker, words):
	$\"Speaker\".text = speaker
	$\"TextEdit\".text = words
	visible = true
	
func think(words):
	$\"Speaker\".text = \"\"
	$\"TextEdit\".text = words
	visible = true
	
func _ready():
	return #hide()
	
func _input(event):
	if event is InputEventMouseButton:
	    if event.button_index == BUTTON_LEFT and event.pressed:
	        emit_signal(\"dismissed\")"

[sub_resource type="DynamicFont" id=4]
size = 29
font_data = ExtResource( 2 )

[sub_resource type="DynamicFont" id=5]
size = 25
font_data = ExtResource( 2 )

[node name="VNgine" type="CanvasLayer"]
script = SubResource( 1 )

[node name="Modal" type="Panel" parent="."]
self_modulate = Color( 1, 1, 1, 0.0235294 )
anchor_right = 1.0
anchor_bottom = 1.0

[node name="CharacterLayer" type="Control" parent="Modal"]
anchor_right = 1.0
anchor_bottom = 1.0

[node name="Poses" type="Control" parent="Modal/CharacterLayer"]
anchor_right = 1.0
anchor_bottom = 1.0
script = SubResource( 2 )

[node name="Left" type="TextureRect" parent="Modal/CharacterLayer/Poses"]
anchor_bottom = 1.0
margin_left = 7.99146
margin_top = 7.27209
margin_right = 649.991
margin_bottom = 250.272
texture = ExtResource( 1 )
expand = true

[node name="Right" type="TextureRect" parent="Modal/CharacterLayer/Poses"]
anchor_left = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -648.478
margin_top = 7.27209
margin_right = -6.47827
margin_bottom = 250.272
texture = ExtResource( 1 )
expand = true

[node name="Center" type="TextureRect" parent="Modal/CharacterLayer/Poses"]
anchor_left = 0.5
anchor_right = 0.5
anchor_bottom = 1.0
margin_left = -310.483
margin_top = 7.27209
margin_right = 331.517
margin_bottom = 250.272
texture = ExtResource( 1 )
expand = true

[node name="SubtitlesLayer" type="Control" parent="Modal"]
anchor_right = 1.0
anchor_bottom = 1.0

[node name="SpeakerBox" type="Panel" parent="Modal/SubtitlesLayer"]
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 41.0
margin_top = -259.0
margin_right = -41.0
margin_bottom = -36.0
script = SubResource( 3 )

[node name="Speaker" type="Label" parent="Modal/SubtitlesLayer/SpeakerBox"]
anchor_right = 1.0
margin_left = 13.0
margin_top = 9.0
margin_right = -16.0
margin_bottom = 49.0
custom_fonts/font = SubResource( 4 )
text = "[SPEAKER]"

[node name="TextEdit" type="TextEdit" parent="Modal/SubtitlesLayer/SpeakerBox"]
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 30.0
margin_top = -152.0
margin_right = -30.0
margin_bottom = -37.0
custom_fonts/font = SubResource( 5 )
text = "Text that is spoken"
readonly = true

[node name="InteractiveLayer" type="Control" parent="Modal"]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
